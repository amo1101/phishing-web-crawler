# Global paths
state_db: /opt/fma-crawler/state.db
warc_root: /data/warcs/fma

# Scheduling
schedule:
  daily_run_time: "02:00"     # local time for the daily ingestion + orchestration (24h)
  heritrix_job_interval_days: 7

# Liveness
liveness:
  timeout_seconds: 10
  treat_http_4xx_as_live: true
  max_parallel_probes: 30

# Heritrix integration
heritrix:
  base_url: "https://localhost:8443"
  username: "admin"
  password: "admin"
  jobs_dir: "/var/lib/heritrix/jobs"  # adjust to your actual path
  max_toe_threads: 50
  robots_policy: "obey"               # obey|ignore|robotsTxtOnly|classic
  limits:
    max_time_seconds: 3600
    max_documents: 20000
    max_bytes: 3221225472
  tls_verify: false                   # if using self-signed in lab
  # Optional: client certs/CA bundle paths if needed

# Unified Pywb collection
pywb:
  collection: "fma"
  auto_index: true
  wb_manager_bin: "wb-manager"        # must be in PATH for the service user

# Dead-site acquisition
dead_site_mode: "heritrix_wayback"    # default working path; "pywb_record" kept for future switch
wayback:
  snapshots_per_domain: 2
  rps: 0.5                            # polite limit to web.archive.org
  cdx_endpoint: "https://web.archive.org/cdx/search/cdx"
  # CDX options reflect Wayback CDX Server API
  cdx_params:
    matchType: "domain"
    output: "json"
    fl: "timestamp,original,statuscode,digest"
    filter: "statuscode:200"
    collapse: "digest"
