# Global paths
state_db: /Data/scratch/cw486/phishingwebarchive/state.db
warc_root: /Data/scratch/cw486/phishingwebarchive/fma

iosco:
  csv_root: "/Data/scratch/cw486/phishingwebarchive/iosco"
  nca_id: 64
  subsection: "main"
  request_timeout_seconds: 60

# Scheduling
schedule:
  daily_run_time: "02:00"     # local time for the daily ingestion + orchestration (24h)
  heritrix_job_interval_days: 7

queue:
  max_parallel_jobs: 3           # how many queue jobs can be RUNNING at once
  reconcile_interval_seconds: 30 # how often the worker polls Heritrix to refresh job statuses
  max_retries: 2                 # retry failed queue jobs (create/launch errors)
  retry_backoff_seconds: 60      # wait before retrying a failed job

# Liveness
liveness:
  timeout_seconds: 10
  treat_http_4xx_as_live: true
  max_parallel_probes: 30

# Heritrix integration
heritrix:
  base_url: "https://localhost:8443"
  username: "admin"
  password: "admin"
  jobs_dir: "/Data/scratch/cw486/phishingwebarchive/heritrix-3.10.2/jobs"
  max_toe_threads: 5
  robots_policy: "obey"               # obey|ignore|robotsTxtOnly|classic
  limits:
    max_time_seconds: 3600
    max_documents: 20000
    max_bytes: 3221225472
  tls_verify: false                   # if using self-signed in lab
  # Optional: client certs/CA bundle paths if needed

# Unified Pywb collection
pywb:
  collection: "fma"
  auto_index: true
  wb_manager_bin: "wb-manager"        # must be in PATH for the service user

# Dead-site acquisition
wayback:
  snapshots_per_domain: 1
  rps: 0.5                            # polite limit to web.archive.org
  cdx_endpoint: "https://web.archive.org/cdx/search/cdx"
  # CDX options reflect Wayback CDX Server API
  cdx_params:
    matchType: "exact"
    output: "json"
    fl: "timestamp,original,statuscode,digest"
    filter: "statuscode:200"
    collapse: "digest"

# Dashboard
web:
  enable_status_page: true
  host: "127.0.0.1"
  port: 8090
  basic_auth:
    enabled: false
    username: "admin"
    password: "admin"

logging:
  level: INFO                 # DEBUG | INFO | WARNING | ERROR
  file: "logs\\app.log"
  rotate:
    when: "midnight"          # Timed rotation; alternatives: "S","M","H","D","W0"-"W6"
    backupCount: 14           # keep last 14 files
  console: true               # also log to stdout (useful in dev)
  json: false                 # set true if you prefer JSON logs
